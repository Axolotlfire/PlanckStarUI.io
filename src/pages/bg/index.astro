---
import Layout from "/src/layouts/Layout.astro";
---

<Layout>
  <div class="relative w-full h-screen bg-gray-950 overflow-hidden">
    <div
      id="cursor-container"
      class="absolute top-0 left-0 w-full h-full pointer-events-none z-50"
    >
      <!-- Círculo exterior -->
      <div
        id="circle1"
        class="absolute size-10 rounded-full border-t border-white/90"
      >
      </div>
      <!-- Círculo interior -->
      <div
        id="circle2"
        class="absolute size-8 rounded-full border-r border-white/70"
      >
      </div>
    </div>
  </div>

  <script>
    const container = document.getElementById("cursor-container");
    const circle1 = document.getElementById("circle1");
    const circle2 = document.getElementById("circle2");

    let mouseX = container.clientWidth / 2;
    let mouseY = container.clientHeight / 2;
    let lastX = mouseX;
    let lastY = mouseY;
    let speed = 0;

    let angle1 = 0;
    let angle2 = 0;

    window.addEventListener("mousemove", (e) => {
      const rect = container.getBoundingClientRect();
      mouseX = e.clientX - rect.left;
      mouseY = e.clientY - rect.top;

      // Calcular velocidad
      const dx = mouseX - lastX;
      const dy = mouseY - lastY;
      speed = Math.min(Math.sqrt(dx * dx + dy * dy), 90); // limitar velocidad
      lastX = mouseX;
      lastY = mouseY;
    });

    function animate() {
      requestAnimationFrame(animate);

      // Rotación según velocidad del mouse
      angle1 += 0.05 * (1 + speed / 10);
      angle2 -= 0.07 * (1 + speed / 10);

      // Centrar los círculos en el mouse
      circle1.style.transform = `translate(${mouseX}px, ${mouseY}px) translate(-50%, -50%) rotate(${angle1}rad)`;
      circle2.style.transform = `translate(${mouseX}px, ${mouseY}px) translate(-50%, -50%) rotate(${angle2}rad)`;
    }

    animate();
  </script>
</Layout>
